<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-releases/15.0.0" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">RxDB 15.0.0 - Major Migration Overhaul | RxDB - JavaScript Database</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rxdb.info/img/rxdb_social_card.png"><meta data-rh="true" name="twitter:image" content="https://rxdb.info/img/rxdb_social_card.png"><meta data-rh="true" property="og:url" content="https://rxdb.info/releases/15.0.0.html"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RxDB 15.0.0 - Major Migration Overhaul | RxDB - JavaScript Database"><meta data-rh="true" name="description" content="Discover RxDB 15.0.0, featuring new migration strategies, replication improvements, and lightning-fast performance to supercharge your app."><meta data-rh="true" property="og:description" content="Discover RxDB 15.0.0, featuring new migration strategies, replication improvements, and lightning-fast performance to supercharge your app."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rxdb.info/releases/15.0.0.html"><link data-rh="true" rel="alternate" href="https://rxdb.info/releases/15.0.0.html" hreflang="en"><link data-rh="true" rel="alternate" href="https://rxdb.info/releases/15.0.0.html" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-62D63SY3S0"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-62D63SY3S0",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-PL63TR5",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>





<link rel="icon" type="image/svg+xml" href="/files/logo/logo.svg">
<link rel="apple-touch-icon" href="/img/apple-touch-icon.png" sizes="180x180"><link rel="stylesheet" href="/assets/css/styles.7c07b926.css">
<script src="/assets/js/runtime~main.4cc48f2e.js" defer="defer"></script>
<script src="/assets/js/main.f109cf2f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PL63TR5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/files/logo/logo_text_white.svg"><link rel="preload" as="image" href="../files/rx-storage-performance-browser.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M-1.90735e-06 20.0001L20 20.0001V16.0001L-1.90735e-06 16.0001V20.0001Z" fill="white"></path><path d="M-1.90735e-06 12.0001L20 12.0001V8.00006L-1.90735e-06 8.00006V12.0001Z" fill="white"></path><path d="M-1.90735e-06 4L20 4V0L-1.90735e-06 0V4Z" fill="white"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/files/logo/logo_text_white.svg" alt="RxDB" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/files/logo/logo_text_white.svg" alt="RxDB" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/overview.html">Docs</a><a class="navbar__item navbar__link" href="/replication.html">Sync</a><a class="navbar__item navbar__link" href="/rx-storage.html">Storages</a><a class="navbar__item navbar__link" href="/premium/">Premium</a><a class="navbar__item navbar__link" href="/consulting/">Support</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="/chat/" class="navbar__item navbar__link navbar-icon navbar__item navbar-icon-discord" target="_blank"> </a><a href="/code/" class="navbar__item navbar__link navbar-icon navbar__item navbar-icon-github" target="_blank"> </a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="navbar-line" style="position:fixed;left:0;z-index:10;height:1.5px;width:100vw;background-color:var(--color-top);border-top-right-radius:2px;border-bottom-right-radius:2px;transform-origin:left center;will-change:transform;backface-visibility:hidden;contain:layout;transform:scaleX(0)"></div><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/overview.html"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview.html"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/quickstart.html"><span title="ðŸš€ Quickstart" class="linkLabel_WmDU">ðŸš€ Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/install.html"><span title="Installation" class="linkLabel_WmDU">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-mode.html"><span title="Development Mode" class="linkLabel_WmDU">Development Mode</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/typescript.html"><span title="TypeScript Setup" class="linkLabel_WmDU">TypeScript Setup</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-database.html"><span title="Core Entities" class="categoryLinkLabel_W154">Core Entities</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-storage.html"><span title="ðŸ’¾ Storages" class="categoryLinkLabel_W154">ðŸ’¾ Storages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/schema-validation.html"><span title="Storage Wrappers" class="categoryLinkLabel_W154">Storage Wrappers</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/replication.html"><span title="ðŸ”„ Replication" class="categoryLinkLabel_W154">ðŸ”„ Replication</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-server.html"><span title="Server" class="categoryLinkLabel_W154">Server</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/transactions-conflicts-revisions.html"><span title="How RxDB works" class="categoryLinkLabel_W154">How RxDB works</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/migration-schema.html"><span title="Advanced Features" class="categoryLinkLabel_W154">Advanced Features</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-storage-performance.html"><span title="Performance" class="categoryLinkLabel_W154">Performance</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/releases/16.0.0.html"><span title="Releases" class="categoryLinkLabel_W154">Releases</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/16.0.0.html"><span title="16.0.0" class="linkLabel_WmDU">16.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/releases/15.0.0.html"><span title="15.0.0" class="linkLabel_WmDU">15.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/14.0.0.html"><span title="14.0.0" class="linkLabel_WmDU">14.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/13.0.0.html"><span title="13.0.0" class="linkLabel_WmDU">13.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/12.0.0.html"><span title="12.0.0" class="linkLabel_WmDU">12.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/11.0.0.html"><span title="11.0.0" class="linkLabel_WmDU">11.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/10.0.0.html"><span title="10.0.0" class="linkLabel_WmDU">10.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/9.0.0.html"><span title="9.0.0" class="linkLabel_WmDU">9.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/8.0.0.html"><span title="8.0.0" class="linkLabel_WmDU">8.0.0</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/articles/browser-database.html"><span title="Articles" class="categoryLinkLabel_W154">Articles</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contribution.html"><span title="Contribute" class="linkLabel_WmDU">Contribute</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/consulting/"><span title="Contact" class="categoryLinkLabel_W154">Contact</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>15.0.0</h1></header>
<p>The release <a href="https://rxdb.info/releases/15.0.0.html" target="_blank" rel="noopener noreferrer" class="">15.0.0</a> is used for major refactorings in the migration plugins and performance improvements of the RxStorage implementations.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="linkedin">LinkedIn<a href="#linkedin" class="hash-link" aria-label="Direct link to LinkedIn" title="Direct link to LinkedIn" translate="no">â€‹</a></h2>
<p>Stay connected with the latest updates and network with professionals in the RxDB community by following RxDB&#x27;s <a href="https://www.linkedin.com/company/rxdb" target="_blank" rel="noopener noreferrer" class="">official LinkedIn page</a>!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance">Performance<a href="#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance" translate="no">â€‹</a></h2>
<p>Performance has improved a lot. Much work has been done to reduce the CPU footprint of RxDB so that when writes and reads are performed on the database, the JavaScript process can start updating the UI much faster.
Also there have been a lot of improvements to the <a class="" href="/rx-storage-indexeddb.html">IndexedDB RxStorage</a> which now runs in a <strong>Write-Ahead Logging (WAL)</strong> mode which makes write operations about 4x as fast.
The whole RxStorage interface has been optimized so that it has to run less operations which improves overall performance. <a class="" href="/rx-storage-performance.html">Read more</a></p>
<a href="../rx-storage-performance.html"><p align="center"><img src="../files/rx-storage-performance-browser.png" alt="RxStorage performance - browser" width="600"></p></a>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="replication">Replication<a href="#replication" class="hash-link" aria-label="Direct link to Replication" title="Direct link to Replication" translate="no">â€‹</a></h2>
<p>Replication options (like url), are no longer used as replication state identifier. Changing the url without having to restart the replication, is now possible. This is useful if you change your replication url (like <code>path/v3/</code>) on schema changes and you do not want to restart the replication from scratch. You can even swap the replication plugin while still keeping the replication state. The <a class="" href="/replication-couchdb.html">couchdb replication</a> now also requires an <code>replicationIdentifier</code>.</p>
<p>The replication meta data is now also compressed when the <a class="" href="/key-compression.html">KeyCompression Plugin</a> is used.</p>
<p>The replication-protocol does now support attachment replication. This clears the path to add the attachment replication to the other RxDB replication plugins.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rewrite-schema-version-migration">Rewrite schema version migration<a href="#rewrite-schema-version-migration" class="hash-link" aria-label="Direct link to Rewrite schema version migration" title="Direct link to Rewrite schema version migration" translate="no">â€‹</a></h2>
<p>The <a class="" href="/migration-schema.html">schema migration plugin</a> has been fully rewritten from scratch.</p>
<p>From now on it internally uses the replication protocol to do a one-time replication from the old collection to the new one. This makes the code more simple and ensures that canceled migrations (when the user closes the browser), can continue from the correct position.</p>
<p>Replication states from the <a class="" href="/replication.html">RxReplication</a> are also migrated together with the normal data.
Previously a migration dropped the replication state which required a new replication of all data from scratch, even if the
client already had the same data as the server. Now the <code>assumedMasterState</code> and <code>checkpoint</code> are also migrated so that
the replication will continue from where it was before the migration has run.</p>
<p>Also it now handles multi-instance runtimes correctly. If multiple browser tabs are open, only one of them (per RxCollection) will run the migration.
Migration state events are propagated across browser tabs.</p>
<p>Documents with <code>_deleted: true</code> will also be migrated. This ensures that non-pushed deletes are not dropped during migrations and will
still be replicated if the client goes online again.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-eventreducetrue-as-default">Set <code>eventReduce:true</code> as default<a href="#set-eventreducetrue-as-default" class="hash-link" aria-label="Direct link to set-eventreducetrue-as-default" title="Direct link to set-eventreducetrue-as-default" translate="no">â€‹</a></h2>
<p>The <a href="https://github.com/pubkey/event-reduce" target="_blank" rel="noopener noreferrer" class="">EventReduce algorithm</a> is now enabled by default.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-cryptosubtledigest-for-hashing">Use <code>crypto.subtle.digest</code> for hashing<a href="#use-cryptosubtledigest-for-hashing" class="hash-link" aria-label="Direct link to use-cryptosubtledigest-for-hashing" title="Direct link to use-cryptosubtledigest-for-hashing" translate="no">â€‹</a></h2>
<p>Using <code>crypto.subtle.digest</code> from the native WebCrypto API is much faster, so RxDB now uses that as a default. If the API is not available, like in React-Native, the <a href="https://github.com/unjs/ohash" target="_blank" rel="noopener noreferrer" class="">ohash</a> module is used instead. Also any custom <code>hashFunction</code> can be provided when creating the <a class="" href="/rx-database.html">RxDatabase</a>. The <code>hashFunction</code> must now be async and return a Promise.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="fix-attachment-hashing">Fix attachment hashing<a href="#fix-attachment-hashing" class="hash-link" aria-label="Direct link to Fix attachment hashing" title="Direct link to Fix attachment hashing" translate="no">â€‹</a></h2>
<p>Hashing of attachment data to calculate the <code>digest</code> is now done from the RxDB side, not the RxStorage. If you set a custom <code>hashFunction</code> for the database, it will also be used for attachments <code>digest</code> meta data.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="requires-at-least-typescript-version-500">Requires at least typescript version 5.0.0<a href="#requires-at-least-typescript-version-500" class="hash-link" aria-label="Direct link to Requires at least typescript version 5.0.0" title="Direct link to Requires at least typescript version 5.0.0" translate="no">â€‹</a></h2>
<p>We now use <code>export type * from &#x27;./types&#x27;;</code> so RxDB will not work on typescript versions older than 5.0.0.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="require-string-based-regex">Require string based <code>$regex</code><a href="#require-string-based-regex" class="hash-link" aria-label="Direct link to require-string-based-regex" title="Direct link to require-string-based-regex" translate="no">â€‹</a></h2>
<p>Queries with a <code>$regex</code> operator must now be defined as strings, not with <code>RegExp</code> objects. You can still pass RegExp&#x27;s flags in <code>$options</code> parameter. <code>RegExp</code> are mutable objects, which was dangerous and caused hard-to-debug problems.
Also stringification of the $regex had bad performance but is required to send queries from RxDB to the RxStorage.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="refactor-dexiejs-rxstorage">Refactor dexie.js RxStorage<a href="#refactor-dexiejs-rxstorage" class="hash-link" aria-label="Direct link to Refactor dexie.js RxStorage" title="Direct link to Refactor dexie.js RxStorage" translate="no">â€‹</a></h2>
<p>The <a class="" href="/rx-storage-dexie.html">dexie.js storage</a> was refactored to add some missing features:</p>
<ul>
<li class=""><a class="" href="/rx-attachment.html">Attachment</a> support</li>
<li class="">Support for boolean indexes</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rxlocaldocument-emits-a-document-instance-not-the-plain-data">RxLocalDocument.$ emits a document instance, not the plain data<a href="#rxlocaldocument-emits-a-document-instance-not-the-plain-data" class="hash-link" aria-label="Direct link to RxLocalDocument.$ emits a document instance, not the plain data" title="Direct link to RxLocalDocument.$ emits a document instance, not the plain data" translate="no">â€‹</a></h2>
<p>This was changed in <a class="" href="/releases/14.0.0.html">v14</a> for a normal RxDocument.$ which emits RxDocument instances. Same is now also done for <a class="" href="/rx-local-document.html">local documents</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="fix-return-type-of-bulkupsert">Fix return type of .bulkUpsert<a href="#fix-return-type-of-bulkupsert" class="hash-link" aria-label="Direct link to Fix return type of .bulkUpsert" title="Direct link to Fix return type of .bulkUpsert" translate="no">â€‹</a></h2>
<p>Equal to other bulk operations, <code>bulkUpsert</code> will now return an <code>error</code> and a <code>success</code> array. This allows to filter for validation errors and handle them properly.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="add-dev-mode-check-for-disallowed-ref-fields">Add dev-mode check for disallowed $ref fields<a href="#add-dev-mode-check-for-disallowed-ref-fields" class="hash-link" aria-label="Direct link to Add dev-mode check for disallowed $ref fields" title="Direct link to Add dev-mode check for disallowed $ref fields" translate="no">â€‹</a></h2>
<p>RxDB cannot resolve <code>$ref</code> fields in the schema because it would have a negative performance impact.
We now have a dev-mode check to throw a helpful error message if $refs are used in the schema.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="improve-rxdocument-property-access-performance">Improve RxDocument property access performance<a href="#improve-rxdocument-property-access-performance" class="hash-link" aria-label="Direct link to Improve RxDocument property access performance" title="Direct link to Improve RxDocument property access performance" translate="no">â€‹</a></h2>
<p>We now use the Proxy API instead of defining getters on each nested property. Also fixed <a href="https://github.com/pubkey/rxdb/pull/4949" target="_blank" rel="noopener noreferrer" class="">#4949</a></p>
<p><code>patternProperties</code> is now allowed on the non-top-level of a schema <a href="https://github.com/pubkey/rxdb/pull/4951" target="_blank" rel="noopener noreferrer" class="">#4951</a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="add-deno-support">Add deno support<a href="#add-deno-support" class="hash-link" aria-label="Direct link to Add deno support" title="Direct link to Add deno support" translate="no">â€‹</a></h2>
<p>The RxDB test suite now also runs in the <a href="https://deno.com/" target="_blank" rel="noopener noreferrer" class="">deno</a> runtime. Also there is a <a href="https://rxdb.info/rx-storage-denokv.html" target="_blank" rel="noopener noreferrer" class="">DenoKV</a> based RxStorage to use with Deno Deploy.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="memory-rxstorage">Memory RxStorage<a href="#memory-rxstorage" class="hash-link" aria-label="Direct link to Memory RxStorage" title="Direct link to Memory RxStorage" translate="no">â€‹</a></h2>
<p>Rewrites of the <a class="" href="/rx-storage-memory.html">Memory RxStorage</a> for better performance.</p>
<ul>
<li class="">Writes are 3x faster</li>
<li class="">Find-by id is 2x faster</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="memory-synced-storage-no-longer-supports-replicationmigration">Memory-Synced storage no longer supports replication+migration<a href="#memory-synced-storage-no-longer-supports-replicationmigration" class="hash-link" aria-label="Direct link to Memory-Synced storage no longer supports replication+migration" title="Direct link to Memory-Synced storage no longer supports replication+migration" translate="no">â€‹</a></h2>
<p>The <a class="" href="/rx-storage-memory-synced.html">memory-synced storage</a> itself does not support replication and migration. This was allowed in the past, but dangerous so now there is an error that throws.
Instead you should replicate the underlying parent storage. Notice that this is only for the <a class="" href="/rx-storage-memory-synced.html">memory-synced storage</a>, NOT for the normal <a class="" href="/rx-storage-memory.html">memory storage</a>. There the replication works like before.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="added-logger-plugin">Added Logger Plugin<a href="#added-logger-plugin" class="hash-link" aria-label="Direct link to Added Logger Plugin" title="Direct link to Added Logger Plugin" translate="no">â€‹</a></h2>
<p>I added a <a class="" href="/logger.html">logger plugin</a> to detect performance problems and errors.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="documentation-is-now-served-by-docusaurus">Documentation is now served by docusaurus<a href="#documentation-is-now-served-by-docusaurus" class="hash-link" aria-label="Direct link to Documentation is now served by docusaurus" title="Direct link to Documentation is now served by docusaurus" translate="no">â€‹</a></h2>
<p>In the past we used gitbook which is no longer maintained and had some major issues. Now the documentation of RxDB is rendered and served with <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer" class="">docusaurus</a> which has a better design and maintenance.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="replaced-modfijs-with-mingo-package">Replaced <code>modfijs</code> with <code>mingo</code> package<a href="#replaced-modfijs-with-mingo-package" class="hash-link" aria-label="Direct link to replaced-modfijs-with-mingo-package" title="Direct link to replaced-modfijs-with-mingo-package" translate="no">â€‹</a></h2>
<p>In the past, the <a href="https://github.com/lgandecki/modifyjs" target="_blank" rel="noopener noreferrer" class="">modifyjs</a> was used for the <code>update</code> plugin. This was replaced with the <a href="https://github.com/kofrasa/mingo" target="_blank" rel="noopener noreferrer" class="">mingo library</a> which is more up to date and already used in RxDB for the query engine.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="changes-to-the-rxstorage-interface">Changes to the RxStorage interface<a href="#changes-to-the-rxstorage-interface" class="hash-link" aria-label="Direct link to Changes to the RxStorage interface" title="Direct link to Changes to the RxStorage interface" translate="no">â€‹</a></h2>
<p>We no longer have <code>RxStorage.statics.prepareQuery()</code>. Instead all storages get the same prepared query as input for the <code>.query()</code> method. If a storage requires some transformations, it has to do them by itself before running the query. This change simplifies the whole RxDB code base a lot and the previous assumption of having a better performance by pre-running the query preparation, turned out to be not true because the query planning is quite fast.</p>
<p>Removed the <code>RxStorage.statics</code> property. This makes configuration easier especially for the remote storage plugins.</p>
<p>The RxStorage itself will now return <code>_deleted=true</code> documents on the <code>.query()</code> method. This is required for upcoming plugins like the server plugin where it must be able to run queries on deleted documents.
Notice that this is only for the RxStorage itself, RxDB queries will run like normal and NOT contain deleted documents in their results.</p>
<p>Changed the response type of RxStorageInstance.bulkWrite() from indexed (by id) objects to arrays for better performance.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes" translate="no">â€‹</a></h2>
<ul>
<li class="">Added <code>RxCollection.cleanup()</code> to manually call the <a class="" href="/cleanup.html">cleanup functions</a>.</li>
<li class="">Rename send$ to sent$: <code>myRxReplicationState.send$.subscribe</code> works only if the sending is successful. Therefore, it is renamed to <code>sent$</code>, not <code>send$</code>.</li>
<li class="">We no longer ship <code>dist/rxdb.browserify.js</code> and <code>dist/rxdb.browserify.min.js</code>. If you need these, build them by yourself.</li>
<li class="">The example project for vanilla javascript was outdated. I removed it to no longer confuse new users.</li>
<li class="">REPLACE <code>new Date().getTime()</code> with <code>Date.now()</code> which is <a href="https://stackoverflow.com/questions/12517359/performance-date-now-vs-date-gettime" target="_blank" rel="noopener noreferrer" class="">2x faster</a>.</li>
<li class="">Renamed replication-p2p to replication-webrtc. I will add more p2p replication plugins in the future, which are not based on <a class="" href="/replication-webrtc.html">WebRTC</a>.</li>
<li class="">REMOVED <code>RxChangeEvent.eventId</code>. If you really need a unique ID, you can craft your own one based on the document <code>_rev</code> and <code>primary</code>.</li>
<li class="">REMOVED <code>RxChangeEvent.startTime</code> and <code>RxChangeEvent.endTime</code> so we do not have to call <code>Date.now()</code> once per write row.</li>
<li class="">ADDED <code>EventBulk.startTime</code> and <code>EventBulk.endTime</code>.</li>
<li class="">FIX <code>database.remove()</code> does not work on databases with encrypted fields.</li>
<li class="">FIX <a href="https://github.com/pubkey/rxdb/pull/5187" target="_blank" rel="noopener noreferrer" class="">react-native: replaceAll is not a function</a></li>
<li class="">FIX Throttle calls to forkInstance on push-replication to not cause memory spikes and lagging UI</li>
<li class="">FIX PushModifier applied to pre-change legacy document, resulting in old document sent to endpoint <a href="https://github.com/pubkey/rxdb/issues/5256" target="_blank" rel="noopener noreferrer" class="">#5256</a></li>
<li class=""><a class="" href="/rx-attachment.html#attachment-compression">Attachment compression</a> is now using the native <code>Compression Streams API</code>.</li>
<li class="">FIX <a href="https://github.com/pubkey/rxdb/issues/5311" target="_blank" rel="noopener noreferrer" class="">#5311</a> URL.createObjectURL is not a function in a browser plugin environment(background.js)</li>
<li class="">FIX <code>structuredClone</code> not available in ReactNative <a href="https://github.com/pubkey/rxdb/issues/5046#issuecomment-1827374498" target="_blank" rel="noopener noreferrer" class="">#5046</a></li>
<li class="">The following things moved out of beta:<!-- -->
<ul>
<li class=""><a class="" href="/replication-firestore.html">Firestore replication</a></li>
<li class=""><a class="" href="/replication-webrtc.html">WebRTC replication</a></li>
<li class=""><a class="" href="/replication-nats.html">NATS replication</a></li>
<li class=""><a class="" href="/rx-storage-opfs.html">OPFS RxStorage</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="changes-to-the--premium-plugins">Changes to the ðŸ‘‘ Premium Plugins<a href="#changes-to-the--premium-plugins" class="hash-link" aria-label="Direct link to Changes to the ðŸ‘‘ Premium Plugins" title="Direct link to Changes to the ðŸ‘‘ Premium Plugins" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="storage-migration-plugin-moved-from-premium-to-open-core">storage-migration plugin moved from premium to open-core<a href="#storage-migration-plugin-moved-from-premium-to-open-core" class="hash-link" aria-label="Direct link to storage-migration plugin moved from premium to open-core" title="Direct link to storage-migration plugin moved from premium to open-core" translate="no">â€‹</a></h3>
<p>The storage migration plugin can be used to migrate data between different RxStorage implementation or to migrate data between major RxDB versions. This previously was a ðŸ‘‘ premium plugin, but now it is part of the open-core. Also the params syntax changed a bit <a class="" href="/migration-storage.html">read more</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="changes-in-pricing">Changes in pricing<a href="#changes-in-pricing" class="hash-link" aria-label="Direct link to Changes in pricing" title="Direct link to Changes in pricing" translate="no">â€‹</a></h3>
<p>The pricing of the premium plugins was changed. This makes it cheaper for smaller companies and single individuals.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="added-perpetual-license-option">Added perpetual license option<a href="#added-perpetual-license-option" class="hash-link" aria-label="Direct link to Added perpetual license option" title="Direct link to Added perpetual license option" translate="no">â€‹</a></h3>
<p>By default you are not allowed to use the premium plugins after the
license has expired and you will no longer be able to install them. But
you can choose the <strong>Perpetual license</strong> option. With the perpetual
license option, you can still use the plugins even after the license is
expired. But you will no longer get any updates from newer RxDB
versions.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="you-can-help">You can help!<a href="#you-can-help" class="hash-link" aria-label="Direct link to You can help!" title="Direct link to You can help!" translate="no">â€‹</a></h2>
<p>There are many things that can be done by <strong>you</strong> to improve RxDB:</p>
<ul>
<li class="">Check the <a href="https://github.com/pubkey/rxdb/blob/master/orga/BACKLOG.md" target="_blank" rel="noopener noreferrer" class="">BACKLOG</a> for features that would be great to have.</li>
<li class="">Check the <a href="https://github.com/pubkey/rxdb/blob/master/orga/before-next-major.md" target="_blank" rel="noopener noreferrer" class="">breaking backlog</a> for breaking changes that must be implemented in the future but where I did not have the time yet.</li>
<li class="">Check the <a href="https://github.com/pubkey/rxdb/search?q=TODO" target="_blank" rel="noopener noreferrer" class="">TODOs</a> in the code. There are many small improvements that can be done for performance and build size.</li>
<li class="">Review the code and add tests. I am only a single human with a laptop. My code is not perfect and much small improvements can be done when people review the code and help me to clarify undefined behaviors.</li>
<li class="">Update the <a href="https://github.com/pubkey/rxdb/tree/master/examples" target="_blank" rel="noopener noreferrer" class="">example projects</a> some of them are outdated and need updates.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/releases/16.0.0.html"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">16.0.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/releases/14.0.0.html"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">14.0.0</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#linkedin" class="table-of-contents__link toc-highlight">LinkedIn</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li><li><a href="#replication" class="table-of-contents__link toc-highlight">Replication</a></li><li><a href="#rewrite-schema-version-migration" class="table-of-contents__link toc-highlight">Rewrite schema version migration</a></li><li><a href="#set-eventreducetrue-as-default" class="table-of-contents__link toc-highlight">Set <code>eventReduce:true</code> as default</a></li><li><a href="#use-cryptosubtledigest-for-hashing" class="table-of-contents__link toc-highlight">Use <code>crypto.subtle.digest</code> for hashing</a></li><li><a href="#fix-attachment-hashing" class="table-of-contents__link toc-highlight">Fix attachment hashing</a></li><li><a href="#requires-at-least-typescript-version-500" class="table-of-contents__link toc-highlight">Requires at least typescript version 5.0.0</a></li><li><a href="#require-string-based-regex" class="table-of-contents__link toc-highlight">Require string based <code>$regex</code></a></li><li><a href="#refactor-dexiejs-rxstorage" class="table-of-contents__link toc-highlight">Refactor dexie.js RxStorage</a></li><li><a href="#rxlocaldocument-emits-a-document-instance-not-the-plain-data" class="table-of-contents__link toc-highlight">RxLocalDocument.$ emits a document instance, not the plain data</a></li><li><a href="#fix-return-type-of-bulkupsert" class="table-of-contents__link toc-highlight">Fix return type of .bulkUpsert</a></li><li><a href="#add-dev-mode-check-for-disallowed-ref-fields" class="table-of-contents__link toc-highlight">Add dev-mode check for disallowed $ref fields</a></li><li><a href="#improve-rxdocument-property-access-performance" class="table-of-contents__link toc-highlight">Improve RxDocument property access performance</a></li><li><a href="#add-deno-support" class="table-of-contents__link toc-highlight">Add deno support</a></li><li><a href="#memory-rxstorage" class="table-of-contents__link toc-highlight">Memory RxStorage</a></li><li><a href="#memory-synced-storage-no-longer-supports-replicationmigration" class="table-of-contents__link toc-highlight">Memory-Synced storage no longer supports replication+migration</a></li><li><a href="#added-logger-plugin" class="table-of-contents__link toc-highlight">Added Logger Plugin</a></li><li><a href="#documentation-is-now-served-by-docusaurus" class="table-of-contents__link toc-highlight">Documentation is now served by docusaurus</a></li><li><a href="#replaced-modfijs-with-mingo-package" class="table-of-contents__link toc-highlight">Replaced <code>modfijs</code> with <code>mingo</code> package</a></li><li><a href="#changes-to-the-rxstorage-interface" class="table-of-contents__link toc-highlight">Changes to the RxStorage interface</a></li><li><a href="#other-changes" class="table-of-contents__link toc-highlight">Other changes</a></li><li><a href="#changes-to-the--premium-plugins" class="table-of-contents__link toc-highlight">Changes to the ðŸ‘‘ Premium Plugins</a><ul><li><a href="#storage-migration-plugin-moved-from-premium-to-open-core" class="table-of-contents__link toc-highlight">storage-migration plugin moved from premium to open-core</a></li><li><a href="#changes-in-pricing" class="table-of-contents__link toc-highlight">Changes in pricing</a></li><li><a href="#added-perpetual-license-option" class="table-of-contents__link toc-highlight">Added perpetual license option</a></li></ul></li><li><a href="#you-can-help" class="table-of-contents__link toc-highlight">You can help!</a></li></ul></div></div></div><ul style="margin-top:25px;list-style-type:none"><li style="line-height:4;color:var(--expo-theme-text-secondary)">Was this page helpful?<div style="border-radius:3px;border-color:var(--fontColor-offwhite);border-style:solid;border-width:1px;vertical-align:middle;padding:5px;padding-left:8px;padding-right:8px;text-align:center;justify-content:center;display:inline-flex;margin-left:20px;cursor:pointer"><img src="/img/thumbs-up-white.svg" loading="lazy" height="14"></div><div style="border-radius:3px;border-color:var(--fontColor-offwhite);border-style:solid;border-width:1px;vertical-align:middle;padding:5px;padding-left:8px;padding-right:8px;text-align:center;justify-content:center;display:inline-flex;margin-left:20px;cursor:pointer;transform:scale(1, -1)"><img src="/img/thumbs-up-white.svg" loading="lazy" height="14"></div></li><li><a href="/chat/" target="_blank" style="color:var(--fontColor-offwhite)"><img src="/img/community-links/discord-logo.svg" style="padding-right:16px;height:18px;vertical-align:middle" loading="lazy">Ask a question on the forums about <!-- -->15.0.0</a></li></ul></div></main></div></div></div><div class="block footer dark"><div style="display:flex;flex-wrap:wrap;gap:44px" class="content"><div class="half left"><span><a variant="text" href="/" class="footer-logo-button"><img src="/files/logo/logo_text_white.svg" alt="RxDB" loading="lazy" class="width-140-120"></a><div class="footer-community-links"><a variant="text" href="/newsletter/" target="_blank" aria-label="Newsletter"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none"><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22.5 13.5v-7a2 2 0 0 0-2-2h-16a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"></path><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m22.5 7.5-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2.5 7.5M19.5 16.5v6M16.5 19.5h6"></path></svg></a><a variant="text" href="https://twitter.com/intent/user?screen_name=rxdbjs" target="_blank" aria-label="Twitter"><img src="/files/icons/twitter-blue.svg" alt="Twitter" loading="lazy"></a><a variant="text" href="https://www.linkedin.com/company/rxdb" target="_blank" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 21"><g clip-path="url(#a)"><path fill="#fff" d="M17.3 17.6h-3V13c0-1 0-2.5-1.6-2.5-1.5 0-1.8 1.2-1.8 2.5v4.7H8V8h2.9v1.3a3 3 0 0 1 2.9-1.6c3 0 3.6 2 3.6 4.6zM4.5 6.6a1.7 1.7 0 1 1 0-3.5 1.7 1.7 0 0 1 0 3.5m1.5 11H3V8h3zM18.8.4H1.5A1.5 1.5 0 0 0 0 1.8v17.4a1.5 1.5 0 0 0 1.5 1.4h17.3a1.5 1.5 0 0 0 1.5-1.4V1.8A1.5 1.5 0 0 0 18.8.4"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 .4h24v20.5H0z"></path></clipPath></defs></svg></a><a variant="text" href="/code/" target="_blank" aria-label="Github"><span class="navbar-icon-github" style="width:22px;height:22px;display:inline-block"></span></a><a variant="text" href="/chat/" target="_blank" aria-label="Discord"><span class="navbar-icon-discord" style="width:22px;height:22px;display:inline-block"></span></a></div></span></div><div class="half right" style="display:flex;flex:1"><div style="display:flex"><div class="footer-links min-width-180-135"><a variant="text" href="/overview.html" target="">Docs</a><a variant="text" href="/replication.html" target="">Sync</a><a variant="text" href="/rx-storage.html" target="">Storages</a><a variant="text" href="/premium/" target="_blank">Premium</a><a variant="text" href="/consulting/" target="_blank">Support</a></div><div class="footer-links min-width-180-135"><a variant="text" href="/#reviews" target="">Our Customers</a><a variant="text" href="/legal-notice/" target="_blank">Legal Notice</a></div></div></div></div></div><div class="navbar-line" style="display:block;z-index:10;height:1.5px;background-color:var(--color-top);border-top-right-radius:2px;border-bottom-right-radius:2px;width:100%"></div><div class="call-to-action-popup"><div class="close"><div class="text">âœ•</div></div></div></div>
</body>
</html>