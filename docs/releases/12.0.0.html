<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-releases/12.0.0" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">RxDB 12.0.0 - Clean, Lean &amp; Mean | RxDB - JavaScript Database</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rxdb.info/img/rxdb_social_card.png"><meta data-rh="true" name="twitter:image" content="https://rxdb.info/img/rxdb_social_card.png"><meta data-rh="true" property="og:url" content="https://rxdb.info/releases/12.0.0.html"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RxDB 12.0.0 - Clean, Lean &amp; Mean | RxDB - JavaScript Database"><meta data-rh="true" name="description" content="Upgrade to RxDB 12.0.0 for blazing-fast queries, streamlined replication, and better index usage. Explore new features and power up your app."><meta data-rh="true" property="og:description" content="Upgrade to RxDB 12.0.0 for blazing-fast queries, streamlined replication, and better index usage. Explore new features and power up your app."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rxdb.info/releases/12.0.0.html"><link data-rh="true" rel="alternate" href="https://rxdb.info/releases/12.0.0.html" hreflang="en"><link data-rh="true" rel="alternate" href="https://rxdb.info/releases/12.0.0.html" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-62D63SY3S0"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-62D63SY3S0",{})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-PL63TR5",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>





<link rel="icon" type="image/svg+xml" href="/files/logo/logo.svg">
<link rel="apple-touch-icon" href="/img/apple-touch-icon.png" sizes="180x180"><link rel="stylesheet" href="/assets/css/styles.7c07b926.css">
<script src="/assets/js/runtime~main.4cc48f2e.js" defer="defer"></script>
<script src="/assets/js/main.f109cf2f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PL63TR5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/files/logo/logo_text_white.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M-1.90735e-06 20.0001L20 20.0001V16.0001L-1.90735e-06 16.0001V20.0001Z" fill="white"></path><path d="M-1.90735e-06 12.0001L20 12.0001V8.00006L-1.90735e-06 8.00006V12.0001Z" fill="white"></path><path d="M-1.90735e-06 4L20 4V0L-1.90735e-06 0V4Z" fill="white"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/files/logo/logo_text_white.svg" alt="RxDB" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/files/logo/logo_text_white.svg" alt="RxDB" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/overview.html">Docs</a><a class="navbar__item navbar__link" href="/replication.html">Sync</a><a class="navbar__item navbar__link" href="/rx-storage.html">Storages</a><a class="navbar__item navbar__link" href="/premium/">Premium</a><a class="navbar__item navbar__link" href="/consulting/">Support</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="/chat/" class="navbar__item navbar__link navbar-icon navbar__item navbar-icon-discord" target="_blank"> </a><a href="/code/" class="navbar__item navbar__link navbar-icon navbar__item navbar-icon-github" target="_blank"> </a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="navbar-line" style="position:fixed;left:0;z-index:10;height:1.5px;width:100vw;background-color:var(--color-top);border-top-right-radius:2px;border-bottom-right-radius:2px;transform-origin:left center;will-change:transform;backface-visibility:hidden;contain:layout;transform:scaleX(0)"></div><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/overview.html"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview.html"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/quickstart.html"><span title="ðŸš€ Quickstart" class="linkLabel_WmDU">ðŸš€ Quickstart</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/install.html"><span title="Installation" class="linkLabel_WmDU">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dev-mode.html"><span title="Development Mode" class="linkLabel_WmDU">Development Mode</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tutorials/typescript.html"><span title="TypeScript Setup" class="linkLabel_WmDU">TypeScript Setup</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-database.html"><span title="Core Entities" class="categoryLinkLabel_W154">Core Entities</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-storage.html"><span title="ðŸ’¾ Storages" class="categoryLinkLabel_W154">ðŸ’¾ Storages</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/schema-validation.html"><span title="Storage Wrappers" class="categoryLinkLabel_W154">Storage Wrappers</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/replication.html"><span title="ðŸ”„ Replication" class="categoryLinkLabel_W154">ðŸ”„ Replication</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-server.html"><span title="Server" class="categoryLinkLabel_W154">Server</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/transactions-conflicts-revisions.html"><span title="How RxDB works" class="categoryLinkLabel_W154">How RxDB works</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/migration-schema.html"><span title="Advanced Features" class="categoryLinkLabel_W154">Advanced Features</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/rx-storage-performance.html"><span title="Performance" class="categoryLinkLabel_W154">Performance</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/releases/16.0.0.html"><span title="Releases" class="categoryLinkLabel_W154">Releases</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/16.0.0.html"><span title="16.0.0" class="linkLabel_WmDU">16.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/15.0.0.html"><span title="15.0.0" class="linkLabel_WmDU">15.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/14.0.0.html"><span title="14.0.0" class="linkLabel_WmDU">14.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/13.0.0.html"><span title="13.0.0" class="linkLabel_WmDU">13.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/releases/12.0.0.html"><span title="12.0.0" class="linkLabel_WmDU">12.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/11.0.0.html"><span title="11.0.0" class="linkLabel_WmDU">11.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/10.0.0.html"><span title="10.0.0" class="linkLabel_WmDU">10.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/9.0.0.html"><span title="9.0.0" class="linkLabel_WmDU">9.0.0</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/releases/8.0.0.html"><span title="8.0.0" class="linkLabel_WmDU">8.0.0</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/articles/browser-database.html"><span title="Articles" class="categoryLinkLabel_W154">Articles</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contribution.html"><span title="Contribute" class="linkLabel_WmDU">Contribute</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/consulting/"><span title="Contact" class="categoryLinkLabel_W154">Contact</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><a href="https://rxdb.info/" target="_blank" rel="noopener noreferrer" class="">RxDB</a> 12.0.0</h1></header>
<p>For the last few months, I worked hard on the new RxDB version 12 release. I mostly focused on performance related features and refactored much of the code.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="removed-the-core-plugin">Removed the <code>core</code> plugin<a href="#removed-the-core-plugin" class="hash-link" aria-label="Direct link to removed-the-core-plugin" title="Direct link to removed-the-core-plugin" translate="no">â€‹</a></h2>
<p>In the past, RxDB exported all bundled plugins when doing <code>import from &#x27;rxdb&#x27;;</code>.
This increased the bundle size, so optionally people could <code>import from &#x27;rxdb/plugins/core&#x27;;</code> to create a custom build that only contains the plugin that they really need.
But very often this lead to accidental imports of <code>&#x27;rxdb&#x27;</code>. For example, when the code editor auto imported methods.
So now, the default <code>import from &#x27;rxdb&#x27;;</code> only exports RxDB core. Every plugin must be imported afterwards if needed.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="unified-the-replication-primitives-and-the-graphql-replication-plugin">Unified the replication primitives and the GraphQL replication plugin<a href="#unified-the-replication-primitives-and-the-graphql-replication-plugin" class="hash-link" aria-label="Direct link to Unified the replication primitives and the GraphQL replication plugin" title="Direct link to Unified the replication primitives and the GraphQL replication plugin" translate="no">â€‹</a></h2>
<p>Most of the GraphQL replication code has been replaced by using the replication primitives plugin internally.
This means many bugs and undefined behavior that was already fixed in the replication primitives, are now also fixed in the GraphQL replication.</p>
<p>Also, the GraphQL replication now runs <code>push</code> in bulk. This means you either have to update your backend to accept bulk mutations, or set <code>push.batchSize: 1</code> and transform the array into a single document inside <code>push.queryBuilder()</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="added-the-cleanup-plugin">Added the cleanup plugin<a href="#added-the-cleanup-plugin" class="hash-link" aria-label="Direct link to Added the cleanup plugin" title="Direct link to Added the cleanup plugin" translate="no">â€‹</a></h2>
<p>To make replication work, and for other reasons, RxDB has to keep deleted documents in storage.
This ensures that when a client is offline, the deletion state is still known and can be replicated with the backend when the client goes online again.</p>
<p>Keeping too many deleted documents in the storage can slow down queries or fill up too much disk space.
With the <a href="https://rxdb.info/cleanup.html" target="_blank" rel="noopener noreferrer" class="">cleanup plugin</a>, RxDB will run cleanup cycles that clean up deleted documents when it can be done safely.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="allow-to-set-a-specific-index">Allow to set a specific index<a href="#allow-to-set-a-specific-index" class="hash-link" aria-label="Direct link to Allow to set a specific index" title="Direct link to Allow to set a specific index" translate="no">â€‹</a></h2>
<p>By default, the query will be sent to RxStorage, where a query planner will determine which one of the available indexes must be used.
But the query planner cannot know everything and sometimes will not pick the most optimal index.
To improve query performance, you can specify which index must be used, when running the query.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> queryResults </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> myCollection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">find</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      selector</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        age</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          $gt</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        gender</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          $eq</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;m&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token doc-comment comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token doc-comment comment" style="color:rgb(98, 114, 164)">       * Because the developer knows that 50% of the documents are &#x27;male&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token doc-comment comment" style="color:rgb(98, 114, 164)">       * but only 20% are below age 18,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token doc-comment comment" style="color:rgb(98, 114, 164)">       * it makes sense to enforce using the [&#x27;gender&#x27;, &#x27;age&#x27;] index to improve performance.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token doc-comment comment" style="color:rgb(98, 114, 164)">       * This could not be known by the query planner which might have chosen [&#x27;age&#x27;, &#x27;gender&#x27;] instead.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token doc-comment comment" style="color:rgb(98, 114, 164)">       */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      index</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;gender&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;age&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">exec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="enforce-primarykey-in-the-index">Enforce primaryKey in the index<a href="#enforce-primarykey-in-the-index" class="hash-link" aria-label="Direct link to Enforce primaryKey in the index" title="Direct link to Enforce primaryKey in the index" translate="no">â€‹</a></h2>
<p>For various performance optimizations, like the <a href="https://github.com/pubkey/event-reduce" target="_blank" rel="noopener noreferrer" class="">EventReduce</a> algorithm, RxDB needs a <strong>deterministic sort order</strong> for all query results.
To ensure a deterministic sorting, RxDB now automatically adds the primary key as last sort attribute to every query, if it is not there already. This ensures that all documents that have the same attributes on all query relevant fields, still can be sorted in a deterministic way, not depending on which was written first to the database.</p>
<p>In the past, this often lead to slow queries, because indexes where not constructed with that in mind.
Now RxDB will add the <code>primaryKey</code> to all indexes that do not contain it already.
If you have any collection with a custom index set, you need to run a <a href="https://rxdb.info/migration-schema.html" target="_blank" rel="noopener noreferrer" class="">migration</a> when updating to RxDB version <code>12.0.0</code> so that RxDB can rebuild the indexes.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="fields-that-are-used-in-indexes-need-some-meta-attributes">Fields that are used in indexes need some meta attributes<a href="#fields-that-are-used-in-indexes-need-some-meta-attributes" class="hash-link" aria-label="Direct link to Fields that are used in indexes need some meta attributes" title="Direct link to Fields that are used in indexes need some meta attributes" translate="no">â€‹</a></h2>
<p>When using a schema with indexes, depending on the field type, you must have set some meta attributes like <code>maxLength</code> or <code>minimum</code>. This is required so that RxDB
is able to know the maximum string representation length of a field, which is needed to craft custom indexes on several <code>RxStorage</code> implementations.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> schemaWithIndexes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">version</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">primaryKey</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;id&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;object&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">properties</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;string&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">maxLength</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// &lt;- the primary key must set `maxLength`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">firstName</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;string&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">maxLength</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// &lt;- string-fields that are used as an index, must set `maxLength`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">active</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;boolean&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">balance</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;number&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)">// number fields that are used in an index, must set `minimum`, `maximum` and `multipleOf`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">minimum</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">maximum</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">100000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">multipleOf</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0.01&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">required</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;active&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// &lt;- boolean fields that are used in an index, must be required. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">indexes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;firstName&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;active&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;firstName&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduce-_meta-field">Introduce <code>_meta</code> field<a href="#introduce-_meta-field" class="hash-link" aria-label="Direct link to introduce-_meta-field" title="Direct link to introduce-_meta-field" translate="no">â€‹</a></h2>
<p>In the past, RxDB used a hacky way to mark documents as being from the remote instance during replication.
This is needed to ensure that pulled documents are not sent to the backend again.
RxDB crafted a specific revision string and stored the data with that string.
This meant that it was not possible to replicate with multiple endpoints at the same time.
From now on, all document data is stored with an <code>_meta</code> field that can contain various flags and other values.
This makes it easier for plugins to remember stuff that belongs to the document.</p>
<p><strong>In the future</strong>, the other meta fields like <code>_rev</code>, <code>_deleted</code> and <code>_attachments</code> will be moved from the root level
to the <code>_meta</code> field. This is <strong>not</strong> done in release <code>12.0.0</code> to ensure that there is a migration path.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="removed-rxstorage-rxkeyobjectinstance">Removed RxStorage RxKeyObjectInstance<a href="#removed-rxstorage-rxkeyobjectinstance" class="hash-link" aria-label="Direct link to Removed RxStorage RxKeyObjectInstance" title="Direct link to Removed RxStorage RxKeyObjectInstance" translate="no">â€‹</a></h2>
<p>In the past, we stored local documents and internal data in a <code>RxStorageKeyObjectInstance</code> of the <code>RxStorage</code> interface.
In PouchDB, this has a <a href="https://pouchdb.com/guides/local-documents.html#advantages-of-local%E2%80%93docs" target="_blank" rel="noopener noreferrer" class="">slight performance</a> improvement compared to storing that data in &#x27;normal&#x27; documents because it does not have to handle the revision tree.
But this improved performance is only possible because normal document handling on PouchDB is so slow.
For every other RxStorage implementation, it does not really matter if documents are stored in a query-able way or not. Therefore, the whole <code>RxStorageKeyObjectInstance</code> is removed. Instead, RxDB now stores local documents and internal data in normal storage instances. This removes complexity and makes things easier in the future. For example, we could now migrate local documents or query them in plugins.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="refactor-plugin-hooks">Refactor plugin hooks<a href="#refactor-plugin-hooks" class="hash-link" aria-label="Direct link to Refactor plugin hooks" title="Direct link to Refactor plugin hooks" translate="no">â€‹</a></h2>
<p>In the past, an <code>RxPlugin</code> could add plugins hooks which where always added as last.
This meant that some plugins depended on having the correct order when calling <code>addRxPlugin()</code>.
Now each plugin hook can be either defined as <code>before</code> or <code>after</code> to specify at which position of the current hooks
the new hook must be added.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="local-documents-must-be-activated-per-rxdatabaserxcollection">Local documents must be activated per RxDatabase/RxCollection<a href="#local-documents-must-be-activated-per-rxdatabaserxcollection" class="hash-link" aria-label="Direct link to Local documents must be activated per RxDatabase/RxCollection" title="Direct link to Local documents must be activated per RxDatabase/RxCollection" translate="no">â€‹</a></h2>
<p>For better performance, the local document plugin does not create a storage for every database or collection that is created.
Instead, you have to set <code>localDocuments: true</code> when you want to store local documents in the instance.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// activate local documents on a RxDatabase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> myDatabase </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createRxDatabase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;mydatabase&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">storage</span><span class="token operator">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRxStoragePouch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;memory&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">localDocuments</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// &lt;- activate this to store local documents in the database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">myDatabase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">addCollections</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">messages</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">schema</span><span class="token operator">:</span><span class="token plain"> messageSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">localDocuments</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// &lt;- activate this to store local documents in the collection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="added-memory-rxstorage">Added Memory RxStorage<a href="#added-memory-rxstorage" class="hash-link" aria-label="Direct link to Added Memory RxStorage" title="Direct link to Added Memory RxStorage" translate="no">â€‹</a></h2>
<p>The <a href="https://rxdb.info/rx-storage-memory.html" target="_blank" rel="noopener noreferrer" class="">Memory RxStorage</a> is based on plain in-memory arrays and objects. It can be used in all environments and is made for performance.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rxdb-premium-">RxDB Premium ðŸ‘‘<a href="#rxdb-premium-" class="hash-link" aria-label="Direct link to RxDB Premium ðŸ‘‘" title="Direct link to RxDB Premium ðŸ‘‘" translate="no">â€‹</a></h2>
<p>You can now purchase access to additional RxDB plugins that are part of the <a class="" href="/premium/">RxDB Premium ðŸ‘‘</a> package.</p>
<p><strong>If you have <a href="https://github.com/sponsors/pubkey" target="_blank" rel="noopener noreferrer" class="">sponsored</a> RxDB in the past (before the April 2022), you can get free lifetime access to RxDB Premium ðŸ‘‘ by writing me via <a href="https://twitter.com/rxdbjs" target="_blank" rel="noopener noreferrer" class="">Twitter</a></strong></p>
<ul>
<li class=""><a href="https://rxdb.info/rx-storage-indexeddb.html" target="_blank" rel="noopener noreferrer" class="">RxStorage IndexedDB</a> a really fast <a href="https://rxdb.info/rx-storage.html" target="_blank" rel="noopener noreferrer" class="">RxStorage</a> implementation based on <strong>IndexedDB</strong>. Made to be used in browsers.</li>
<li class=""><a href="https://rxdb.info/rx-storage-sqlite.html" target="_blank" rel="noopener noreferrer" class="">RxStorage SQLite</a> a really fast <a href="https://rxdb.info/rx-storage.html" target="_blank" rel="noopener noreferrer" class="">RxStorage</a> implementation based on <strong>SQLite</strong>. Made to be used on <strong>Node.js</strong>, <strong>Electron</strong>, <strong>React Native</strong>, <strong>Cordova</strong> or <strong>Capacitor</strong>.</li>
<li class=""><a href="https://rxdb.info/rx-storage-sharding.html" target="_blank" rel="noopener noreferrer" class="">RxStorage Sharding</a> a wrapper around any other <a href="https://rxdb.info/rx-storage.html" target="_blank" rel="noopener noreferrer" class="">RxStorage</a> that improves performance by applying the sharding technique.</li>
<li class=""><strong>migrateRxDBV11ToV12</strong> A plugin that migrates data from any RxDB v11 storage to a new RxDB v12 database. Use this when you upgrade from RxDB 11-&gt;12 and you have to keep your database state.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="other-changes">Other changes<a href="#other-changes" class="hash-link" aria-label="Direct link to Other changes" title="Direct link to Other changes" translate="no">â€‹</a></h2>
<ul>
<li class="">The Dexie.js RxStorage is no longer in beta mode.</li>
<li class="">Added <code>RxDocument().toMutableJSON()</code></li>
<li class="">Added <code>RxCollection().bulkUpsert()</code></li>
<li class="">Added optional <code>init()</code> function to <code>RxPlugin</code>.</li>
<li class="">dev-mode: Add check to ensure all top-level fields in a query are defined in the schema.</li>
<li class="">Support for array field based indexes like <code>data.[].subfield</code> was removed, as it anyway never really worked.</li>
<li class="">Refactored the usage of RxCollection.storageInstance to ensure all hooks run properly.</li>
<li class="">Refactored the encryption plugin so no more plugin specific code is in the RxDB core.</li>
<li class="">Removed the encrypted export from the json-import-export plugin. This was barely used and made everything more complex. All exports are now non-encrypted. If you need them encrypted, you can still run by encryption after the export is done.</li>
<li class="">RxPlugin hooks now can be defined as running <code>before</code> or <code>after</code> other plugin hooks.</li>
<li class="">Attachments are now internally handled as string instead of <code>Blob</code> or <code>Buffer</code></li>
<li class="">Fix (replication primitives) only drop pulled documents when a relevant document was changed locally.</li>
<li class="">Fix dexie.js was not able to query over an index when <code>keyCompression: true</code></li>
</ul>
<p>Changes to <code>RxStorageInterface</code>:</p>
<ul>
<li class=""><code>RxStorageInstance</code> must have the <code>RxStorage</code> in the <code>storage</code> property.</li>
<li class="">The <code>_deleted</code> field is now required for each data interaction with <code>RxStorage</code>.</li>
<li class="">Removed <code>RxStorageInstance.getChangedDocuments()</code> and added <code>RxStorageInstance.getChangedDocumentsSince()</code> for better performance.</li>
<li class="">Added <code>doesBroadcastChangestream()</code> to <code>RxStorageStatics</code></li>
<li class="">Added <code>withDeleted</code> parameter to <code>RxStorageKeyObjectInstance.findLocalDocumentsById()</code></li>
<li class="">Added internal <code>_meta</code> property to stored document data that contains internal document related data like last-write-time and replication checkpoints.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="you-can-help">You can help!<a href="#you-can-help" class="hash-link" aria-label="Direct link to You can help!" title="Direct link to You can help!" translate="no">â€‹</a></h2>
<p>There are many things that can be done by <strong>you</strong> to improve RxDB:</p>
<ul>
<li class="">Check the <a href="https://github.com/pubkey/rxdb/blob/master/orga/BACKLOG.md" target="_blank" rel="noopener noreferrer" class="">BACKLOG</a> for features that would be great to have.</li>
<li class="">Check the <a href="https://github.com/pubkey/rxdb/blob/master/orga/before-next-major.md" target="_blank" rel="noopener noreferrer" class="">breaking backlog</a> for breaking changes that must be implemented in the future but where I did not have the time yet.</li>
<li class="">Check the <a href="https://github.com/pubkey/rxdb/search?q=TODO" target="_blank" rel="noopener noreferrer" class="">TODOs</a> in the code. There are many small improvements that can be done for performance and build size.</li>
<li class="">Review the code and add tests. I am only a single human with a laptop. My code is not perfect and much small improvements can be done when people review the code and help me to clarify undefined behaviors.</li>
<li class="">Improve the documentation. In the last user survey, many users told me that the documentation is not good enough. But I reviewed the docs and could not find clear flaws. The problem is that I am way too deep into RxDB so that I am not able to understand which documentation a newcomer to the project needs. Likely I assume too much knowledge or focus writing about the wrong parts.</li>
<li class="">Update the <a href="https://github.com/pubkey/rxdb/tree/master/examples" target="_blank" rel="noopener noreferrer" class="">example projects</a> many of them are outdated and need updates.</li>
<li class="">Help the next <a href="https://github.com/pouchdb/pouchdb/issues/8408" target="_blank" rel="noopener noreferrer" class="">PouchDB release</a> to improve RxDBs performance.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/releases/13.0.0.html"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">13.0.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/releases/11.0.0.html"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">11.0.0</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#removed-the-core-plugin" class="table-of-contents__link toc-highlight">Removed the <code>core</code> plugin</a></li><li><a href="#unified-the-replication-primitives-and-the-graphql-replication-plugin" class="table-of-contents__link toc-highlight">Unified the replication primitives and the GraphQL replication plugin</a></li><li><a href="#added-the-cleanup-plugin" class="table-of-contents__link toc-highlight">Added the cleanup plugin</a></li><li><a href="#allow-to-set-a-specific-index" class="table-of-contents__link toc-highlight">Allow to set a specific index</a></li><li><a href="#enforce-primarykey-in-the-index" class="table-of-contents__link toc-highlight">Enforce primaryKey in the index</a></li><li><a href="#fields-that-are-used-in-indexes-need-some-meta-attributes" class="table-of-contents__link toc-highlight">Fields that are used in indexes need some meta attributes</a></li><li><a href="#introduce-_meta-field" class="table-of-contents__link toc-highlight">Introduce <code>_meta</code> field</a></li><li><a href="#removed-rxstorage-rxkeyobjectinstance" class="table-of-contents__link toc-highlight">Removed RxStorage RxKeyObjectInstance</a></li><li><a href="#refactor-plugin-hooks" class="table-of-contents__link toc-highlight">Refactor plugin hooks</a></li><li><a href="#local-documents-must-be-activated-per-rxdatabaserxcollection" class="table-of-contents__link toc-highlight">Local documents must be activated per RxDatabase/RxCollection</a></li><li><a href="#added-memory-rxstorage" class="table-of-contents__link toc-highlight">Added Memory RxStorage</a></li><li><a href="#rxdb-premium-" class="table-of-contents__link toc-highlight">RxDB Premium ðŸ‘‘</a></li><li><a href="#other-changes" class="table-of-contents__link toc-highlight">Other changes</a></li><li><a href="#you-can-help" class="table-of-contents__link toc-highlight">You can help!</a></li></ul></div></div></div><ul style="margin-top:25px;list-style-type:none"><li style="line-height:4;color:var(--expo-theme-text-secondary)">Was this page helpful?<div style="border-radius:3px;border-color:var(--fontColor-offwhite);border-style:solid;border-width:1px;vertical-align:middle;padding:5px;padding-left:8px;padding-right:8px;text-align:center;justify-content:center;display:inline-flex;margin-left:20px;cursor:pointer"><img src="/img/thumbs-up-white.svg" loading="lazy" height="14"></div><div style="border-radius:3px;border-color:var(--fontColor-offwhite);border-style:solid;border-width:1px;vertical-align:middle;padding:5px;padding-left:8px;padding-right:8px;text-align:center;justify-content:center;display:inline-flex;margin-left:20px;cursor:pointer;transform:scale(1, -1)"><img src="/img/thumbs-up-white.svg" loading="lazy" height="14"></div></li><li><a href="/chat/" target="_blank" style="color:var(--fontColor-offwhite)"><img src="/img/community-links/discord-logo.svg" style="padding-right:16px;height:18px;vertical-align:middle" loading="lazy">Ask a question on the forums about <!-- -->RxDB 12.0.0</a></li></ul></div></main></div></div></div><div class="block footer dark"><div style="display:flex;flex-wrap:wrap;gap:44px" class="content"><div class="half left"><span><a variant="text" href="/" class="footer-logo-button"><img src="/files/logo/logo_text_white.svg" alt="RxDB" loading="lazy" class="width-140-120"></a><div class="footer-community-links"><a variant="text" href="/newsletter/" target="_blank" aria-label="Newsletter"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none"><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22.5 13.5v-7a2 2 0 0 0-2-2h-16a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"></path><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m22.5 7.5-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2.5 7.5M19.5 16.5v6M16.5 19.5h6"></path></svg></a><a variant="text" href="https://twitter.com/intent/user?screen_name=rxdbjs" target="_blank" aria-label="Twitter"><img src="/files/icons/twitter-blue.svg" alt="Twitter" loading="lazy"></a><a variant="text" href="https://www.linkedin.com/company/rxdb" target="_blank" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 21"><g clip-path="url(#a)"><path fill="#fff" d="M17.3 17.6h-3V13c0-1 0-2.5-1.6-2.5-1.5 0-1.8 1.2-1.8 2.5v4.7H8V8h2.9v1.3a3 3 0 0 1 2.9-1.6c3 0 3.6 2 3.6 4.6zM4.5 6.6a1.7 1.7 0 1 1 0-3.5 1.7 1.7 0 0 1 0 3.5m1.5 11H3V8h3zM18.8.4H1.5A1.5 1.5 0 0 0 0 1.8v17.4a1.5 1.5 0 0 0 1.5 1.4h17.3a1.5 1.5 0 0 0 1.5-1.4V1.8A1.5 1.5 0 0 0 18.8.4"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 .4h24v20.5H0z"></path></clipPath></defs></svg></a><a variant="text" href="/code/" target="_blank" aria-label="Github"><span class="navbar-icon-github" style="width:22px;height:22px;display:inline-block"></span></a><a variant="text" href="/chat/" target="_blank" aria-label="Discord"><span class="navbar-icon-discord" style="width:22px;height:22px;display:inline-block"></span></a></div></span></div><div class="half right" style="display:flex;flex:1"><div style="display:flex"><div class="footer-links min-width-180-135"><a variant="text" href="/overview.html" target="">Docs</a><a variant="text" href="/replication.html" target="">Sync</a><a variant="text" href="/rx-storage.html" target="">Storages</a><a variant="text" href="/premium/" target="_blank">Premium</a><a variant="text" href="/consulting/" target="_blank">Support</a></div><div class="footer-links min-width-180-135"><a variant="text" href="/#reviews" target="">Our Customers</a><a variant="text" href="/legal-notice/" target="_blank">Legal Notice</a></div></div></div></div></div><div class="navbar-line" style="display:block;z-index:10;height:1.5px;background-color:var(--color-top);border-top-right-radius:2px;border-bottom-right-radius:2px;width:100%"></div><div class="call-to-action-popup"><div class="close"><div class="text">âœ•</div></div></div></div>
</body>
</html>